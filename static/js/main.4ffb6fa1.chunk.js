(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(5),r=n.n(c),l=n(2);n(12);const s=Object(a.createContext)(null);var u=({children:e})=>{const t=Object(a.useState)({isLoggedIn:!1,isLoggingIn:!1,token:null,user:null}),n=Object(l.a)(t,2),c=n[0],r=n[1];return o.a.createElement(s.Provider,{value:{auth:c,setAuth:r}},e)},i=n(3),g=n.n(i),m=n(1),b=n(6);function j(){const e=Object(a.useContext)(s),t=e.auth,n=e.setAuth,c=function(){var e=Object(b.a)(g.a.mark(function e(){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(Object(m.a)(Object(m.a)({},t),{},{isLoggingIn:!0})),e.next=3,console.log("fetch user..."),new Promise(e=>{setTimeout(()=>{console.log("fetched user"),e({name:"Mr. Daiello",token:"abjd2323jb443jbbb"})},500)});case 3:a=e.sent,n(Object(m.a)(Object(m.a)({},t),{},{user:a.name,token:a.token,isLoggedIn:!0,isLoggingIn:!1}));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,!t.isLoggedIn&&o.a.createElement("button",{className:"login",onClick:c},"Login"),t.isLoggedIn&&o.a.createElement("button",{className:"logout",onClick:()=>{n(Object(m.a)(Object(m.a)({},t),{},{user:null,token:null,isLoggedIn:!1}))}},"Logout"),t.isLoggingIn&&o.a.createElement("p",null,"Login In..."))}function O(){const e=Object(a.useContext)(s).auth;return e.isLoggedIn&&o.a.createElement("h2",null,"Bienvenido ",e.user)}let d;function f(){const e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),s=Object(l.a)(r,2),i=s[0],g=s[1],m=Object(a.useCallback)((e,t)=>{c(e);const n=t||new Date((new Date).getTime()+36e5);g(n),localStorage.setItem("userData",JSON.stringify({token:e,expirationTime:n.toISOString()}))},[]),b=Object(a.useCallback)(()=>{c(null),localStorage.removeItem("userData")},[]);return Object(a.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expirationTime)>new Date&&m(e.token,new Date(e.expirationTime))},[m]),Object(a.useEffect)(()=>{if(n&&i){const e=i.getTime()-(new Date).getTime();d=setTimeout(b,e)}else clearTimeout(d)},[n,b,i]),o.a.createElement(u,null,o.a.createElement("div",{className:"center"},o.a.createElement(j,null),o.a.createElement(O,null)))}const p=document.getElementById("root");r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(f,null)),p)},7:function(e,t,n){e.exports=n(14)}},[[7,1,2]]]);
//# sourceMappingURL=main.4ffb6fa1.chunk.js.map